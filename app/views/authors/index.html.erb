<div class="max-w-6xl mx-auto space-y-8">
  <!-- Page Header -->
  <div class="text-center space-y-4">
    <h1 class="text-4xl font-bold text-gray-900 dark:text-gray-100">Your reading authors</h1>
    <% if @author_groups.any? %>
      <div class="flex justify-center space-x-8 text-sm">
        <div class="flex items-center space-x-2">
          <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
          <span class="text-gray-600 dark:text-gray-400"><%= @author_groups.length %> Author groups</span>
        </div>
        <div class="flex items-center space-x-2">
          <div class="w-3 h-3 bg-green-500 rounded-full"></div>
          <span class="text-gray-600 dark:text-gray-400"><%= @author_groups.sum { |group| group[:books].length } %> Books total</span>
        </div>
      </div>
    <% end %>
  </div>
  
  <%# Each group represents authors who have collaborated together on books.
      Solo authors appear individually, while collaborating authors are grouped together. %>
  <% if @author_groups.any? %>
    <div class="grid gap-6">
      <% @author_groups.each_with_index do |group, index| %>
        <% collaboration_type = group[:authors].length > 1 ? "collaboration" : "solo" %>
        <% completed_books = group[:books].select(&:finish_date) %>
        <% in_progress_books = group[:books].reject(&:finish_date) %>
        
        <details class="group bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-lg overflow-hidden transition-all hover:shadow-xl">
          <!-- Enhanced Header -->
          <summary class="cursor-pointer p-6 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-800 hover:from-gray-100 hover:to-gray-200 dark:hover:from-gray-600 dark:hover:to-gray-700 transition-all duration-200">
            <div class="flex items-center justify-between">
              <div class="flex-1">
                <!-- Author Names and Type -->
                <div class="flex items-center space-x-3 mb-2">
                  <div class="flex-shrink-0">
                    <% if collaboration_type == "collaboration" %>
                      <div class="w-10 h-10 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center">
                        <svg class="w-5 h-5 text-purple-600 dark:text-purple-400" fill="currentColor" viewBox="0 0 20 20">
                          <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"/>
                        </svg>
                      </div>
                    <% else %>
                      <div class="w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center">
                        <svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                          <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/>
                        </svg>
                      </div>
                    <% end %>
                  </div>
                  <div>
                    <h2 class="text-xl font-bold text-gray-900 dark:text-gray-100">
                      <%= group[:authors].map(&:name).join(", ") %>
                    </h2>
                    <p class="text-sm text-gray-500 dark:text-gray-400">
                      <%= collaboration_type == "collaboration" ? "Collaboration" : "Solo author" %>
                    </p>
                  </div>
                </div>
                
                <!-- Statistics -->
                <div class="flex flex-col sm:flex-row sm:items-start space-y-2 sm:space-y-0 sm:space-x-6 text-sm">
                  <div class="flex items-center space-x-2">
                    <div class="w-3 h-3 bg-green-500 rounded-full flex-shrink-0"></div>
                    <span class="text-gray-600 dark:text-gray-400">
                      <strong><%= completed_books.length %></strong> completed
                    </span>
                  </div>
                  <% if in_progress_books.any? %>
                    <div class="flex items-center space-x-2">
                      <div class="w-3 h-3 bg-yellow-500 rounded-full flex-shrink-0"></div>
                      <span class="text-gray-600 dark:text-gray-400">
                        <strong><%= in_progress_books.length %></strong> in progress
                      </span>
                    </div>
                  <% end %>
                  <div class="flex items-center space-x-2">
                    <div class="w-3 h-3 bg-blue-500 rounded-full flex-shrink-0"></div>
                    <span class="text-gray-600 dark:text-gray-400">
                      <strong><%= group[:books].length %></strong> total books
                    </span>
                  </div>
                </div>
              </div>
              
              <!-- Expand/Collapse Indicator -->
              <div class="flex-shrink-0 ml-4">
                <div class="w-8 h-8 bg-white dark:bg-gray-600 rounded-full flex items-center justify-center shadow-sm group-open:rotate-180 transition-transform duration-200">
                  <svg class="w-4 h-4 text-gray-600 dark:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                  </svg>
                </div>
              </div>
            </div>
          </summary>
          
          <!-- Enhanced Content -->
          <div class="bg-gray-50 dark:bg-gray-900">
            <div class="p-6">
              <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4">
                Books by <%= group[:authors].map(&:name).join(", ") %>
              </h3>
              <%= render partial: "books/list", locals: { books: group[:books], show_author: false } %>
            </div>
          </div>
        </details>
      <% end %>
    </div>
  <% else %>
    <!-- Enhanced Empty State -->
    <div class="text-center py-16">
      <div class="w-24 h-24 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6">
        <svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
        </svg>
      </div>
      <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2">No authors yet.</h2>
      <p class="text-gray-600 dark:text-gray-400 mb-6 max-w-md mx-auto">
        Start your reading journey by adding some books. Authors will appear here as you build your library.
      </p>
      <a href="/books/new" class="inline-flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors">
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
        </svg>
        Add your first book
      </a>
    </div>
  <% end %>
</div>
