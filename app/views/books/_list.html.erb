<%# locals: (books: [], show_author: true) %>
<div class="space-y-3">
  <% books.each do |book| %>
    <div class="flex p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 transition-all duration-200 shadow-sm">
      <!-- Book Cover -->
      <div class="w-12 h-16 sm:w-14 sm:h-18 flex-shrink-0">
        <%= image_tag book.cover_image_url, alt: "Book Cover", class: "w-full h-full object-cover rounded shadow-sm" %>
      </div>

      <!-- Book Details -->
      <div class="flex-1 ml-3 min-w-0 flex flex-col">
        <!-- Title and Author -->
        <div class="flex-1">
          <h3 class="font-semibold text-sm sm:text-base text-gray-900 dark:text-gray-100 truncate" title="<%= book.title %>">
            <%= book.title %>
          </h3>
          <% if show_author %>
            <p class="text-xs sm:text-sm text-gray-600 dark:text-gray-400 truncate mt-0.5" title="<%= book.authors_names %>">
              <%= book.authors_names %>
            </p>
          <% end %>
          
          <!-- Series Info -->
          <% if book.series_name %>
            <p class="text-xs text-gray-500 dark:text-gray-500 truncate mt-1" title="Series: <%= book.series_name %>">
              <span class="font-medium">Series:</span> <%= book.series_name %>
            </p>
          <% end %>
        </div>
        
        <!-- Status and Actions -->
        <div class="flex items-center justify-between mt-2">
          <% if book.finish_date.present? %>
            <div class="flex items-center space-x-1.5">
              <div class="w-2 h-2 bg-green-500 rounded-full flex-shrink-0"></div>
              <span class="text-xs text-green-600 dark:text-green-400 font-medium">
                Completed <%= book.finish_date.strftime("%m/%d/%y") %>
              </span>
            </div>
          <% else %>
            <div class="flex items-center space-x-1.5">
              <div class="w-2 h-2 bg-yellow-500 rounded-full flex-shrink-0"></div>
              <span class="text-xs text-yellow-600 dark:text-yellow-400 font-medium">In Progress</span>
            </div>
          <% end %>
          
          <!-- Action Buttons -->
          <div class="flex items-center space-x-2 flex-shrink-0">
            <% unless book.finish_date.present? %>
              <%= button_to book_path(book, book: { finish_date: Date.current }), method: :patch, class: "rounded-full w-7 h-7 flex items-center justify-center bg-green-600 hover:bg-green-500 dark:bg-green-700 dark:hover:bg-green-600 text-white transition-colors shadow-sm", title: "Mark as Complete" do %>
                <%= heroicon "check", variant: :solid, options: { class: "w-3.5 h-3.5" } %>
              <% end %>
            <% end %>
            
            <%= link_to book, class: "rounded-full w-7 h-7 flex items-center justify-center bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-600 dark:text-gray-300 transition-colors shadow-sm", title: "View Details" do %>
              <%= heroicon "eye", variant: :outline, options: { class: "w-3.5 h-3.5" } %>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>
