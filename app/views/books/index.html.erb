<% content_for :title, "Books" %>

<div class="w-full">
  <% if notice.present? %>
    <p class="py-2 px-3 bg-green-50 dark:bg-green-900 mb-5 text-green-500 dark:text-green-300 font-medium rounded-md inline-block" id="notice"><%= notice %></p>
  <% end %>

  <div class="flex justify-between items-center">
    <h1 class="font-bold text-4xl text-gray-900 dark:text-gray-100">Books</h1>
    <%= link_to new_book_path, class: "rounded-full w-10 h-10 flex items-center justify-center bg-blue-600 hover:bg-blue-500 dark:bg-blue-700 dark:hover:bg-blue-600 text-white" do %>
      <%= heroicon "plus", variant: :solid, options: { class: "w-5 h-5" } %>
    <% end %>
  </div>

  <div id="books" class="min-w-full divide-y divide-gray-200 dark:divide-gray-700 mt-5">
    <% if @books.any? %>
      <% @books.each do |book| %>
        <div class="flex items-center py-3 space-x-4">
          <!-- Book Cover -->
          <div class="w-16 h-16 flex-shrink-0">
            <%= image_tag "default_book_cover.jpg", alt: "Book Cover", class: "w-full h-full object-cover rounded-md" %>
          </div>

          <!-- Book Title, Authors, and Status -->
          <div class="flex-1">
            <h2 class="font-medium text-lg text-gray-900 dark:text-gray-100"><%= book.title %></h2>
            <p class="text-sm text-gray-700 dark:text-gray-300">By: <%= book.authors_names %></p>
            <% if book.finish_date.present? %>
              <p class="text-sm text-green-600 dark:text-green-400">Completed on <%= book.finish_date.strftime("%B %d, %Y") %></p>
            <% else %>
              <div class="flex items-center space-x-4">
                <div class="flex items-center space-x-2">
                  <p class="text-sm text-yellow-600 dark:text-yellow-400">In Progress</p>
                  <%= button_to book_path(book, book: { finish_date: Date.today }), method: :patch, class: "rounded-full w-6 h-6 flex items-center justify-center bg-green-600 hover:bg-green-500 dark:bg-green-700 dark:hover:bg-green-600 text-white", title: "Mark as Complete" do %>
                    <%= heroicon "check", variant: :solid, options: { class: "w-4 h-4" } %>
                  <% end %>
                </div>
              </div>
            <% end %>
          </div>

          <!-- Show Link -->
          <div>
            <%= link_to book, class: "rounded-full w-10 h-10 flex items-center justify-center bg-gray-100 hover:bg-gray-50 dark:bg-gray-800 dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100" do %>
              <%= heroicon "eye", variant: :outline, options: { class: "w-5 h-5" } %>
            <% end %>
          </div>
        </div>
      <% end %>
    <% else %>
      <p class="text-center my-10 text-gray-700 dark:text-gray-300">No books found.</p>
    <% end %>
  </div>
</div>
