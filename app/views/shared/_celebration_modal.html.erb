<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/60 dark:bg-black/80 transition-opacity p-4 pt-[env(safe-area-inset-top,1rem)] pb-[env(safe-area-inset-bottom,1rem)]" 
     data-controller="celebration-modal" 
     data-celebration-modal-target="overlay"
     data-action="click->celebration-modal#clickOverlay keydown@window->celebration-modal#keydown">
  <div class="bg-white dark:bg-gray-900 rounded-xl shadow-2xl border-2 border-yellow-400/30 dark:border-yellow-400/50 p-4 sm:p-6 md:p-8 w-full max-w-sm sm:max-w-md max-h-[80vh] overflow-y-auto transform transition-transform relative" 
       data-celebration-modal-target="modal">
    <!-- Celebration background decoration -->
    <div class="absolute inset-0 bg-gradient-to-br from-yellow-50/50 via-transparent to-blue-50/50 dark:from-yellow-900/20 dark:via-transparent dark:to-blue-900/20 rounded-xl"></div>
    <div class="relative z-10">
    
    <!-- Celebration Icon and Title -->
    <div class="text-center mb-4 sm:mb-6">
      <!-- Party/Celebration Emoji or Icon with animation -->
      <div class="text-4xl sm:text-6xl md:text-8xl mb-2 sm:mb-4 animate-bounce">ðŸŽ‰</div>
      <h2 class="text-xl sm:text-2xl md:text-3xl font-bold text-gray-900 dark:text-white mb-2 drop-shadow-sm">
        Congratulations!
      </h2>
      <p class="text-sm sm:text-base md:text-lg text-gray-700 dark:text-gray-200">
        You've completed your 
        <span class="font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-orange-500 dark:from-yellow-400 dark:to-orange-400 text-lg sm:text-xl md:text-3xl drop-shadow-sm">
          <%= [books_completed, 1].max.ordinalize %>
        </span>
        book!
      </p>
    </div>

    <!-- Book Details -->
    <div class="bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 rounded-xl p-3 sm:p-4 mb-4 sm:mb-6 border border-gray-200 dark:border-gray-600 shadow-inner">
      <div class="flex space-x-3 sm:space-x-4">
        <div class="w-12 h-16 sm:w-16 sm:h-24 flex-shrink-0">
          <%= image_tag book.cover_image_url || "default_book_cover.jpg", 
                        alt: "Book Cover", 
                        class: "w-full h-full object-cover rounded-lg shadow-md border border-gray-300 dark:border-gray-500" %>
        </div>
        <div class="flex-1 min-w-0">
          <h3 class="font-bold text-gray-900 dark:text-white mb-1 text-sm sm:text-base md:text-lg truncate">
            <%= book.title %>
          </h3>
          <p class="text-xs sm:text-sm text-gray-700 dark:text-gray-300 mb-2 font-medium truncate">
            by <%= book.authors_names %>
          </p>
          <p class="text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 px-2 py-1 rounded-md inline-block">
            Completed: <%= book.finish_date.strftime("%B %d, %Y") %>
          </p>
        </div>
      </div>
    </div>

    <!-- Achievement Message -->
    <div class="text-center mb-4 sm:mb-6">
      <p class="text-sm sm:text-base text-gray-700 dark:text-gray-300 font-medium">
        Keep up the great work! Every book completed is a step toward your reading goals.
      </p>
    </div>

    <!-- Action Buttons -->
    <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3">
      <button data-action="click->celebration-modal#close" 
              class="w-full sm:flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg transition-colors font-medium border border-gray-300 dark:border-gray-600 text-sm sm:text-base">
        Close
      </button>
      <%= link_to new_book_path(return_to: root_path), 
                  class: "w-full sm:flex-1 px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 dark:from-blue-500 dark:to-blue-600 dark:hover:from-blue-600 dark:hover:to-blue-700 text-white rounded-lg transition-all duration-200 text-center font-medium shadow-lg hover:shadow-xl transform hover:scale-105 text-sm sm:text-base" do %>
        Start Next Book
      <% end %>
    </div>
    </div>
  </div>
</div>